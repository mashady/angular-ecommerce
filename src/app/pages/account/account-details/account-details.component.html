<section class="editAccount">
  <div *ngIf="successMessage" class="alert alert-success" role="alert">
    {{ successMessage }}
  </div>
  <form [formGroup]="editAccountForm" (ngSubmit)="onSubmit()">
    <div class="form-row">
      <div class="form-group">
        <label for="firstName">First Name</label>
        <input
          type="text"
          class="form-control"
          id="firstName"
          placeholder="First Name"
          formControlName="firstName"
        />
        <div
          *ngIf="f['firstName'].touched && f['firstName'].invalid"
          class="alert alert-danger mt-2"
        >
          <div *ngIf="f['firstName'].hasError('required')">
            First name is required.
          </div>
          <div *ngIf="f['firstName'].hasError('minlength')">
            First name must be at least 3 characters long.
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="lastName">Last Name</label>
        <input
          type="text"
          class="form-control"
          id="lastName"
          placeholder="Last Name"
          formControlName="lastName"
        />
        <div
          *ngIf="f['lastName'].touched && f['lastName'].invalid"
          class="alert alert-danger mt-2"
        >
          <div *ngIf="f['lastName'].hasError('required')">
            Last name is required.
          </div>
          <div *ngIf="f['lastName'].hasError('minlength')">
            Last name must be at least 3 characters long.
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="inputEmail4">Email</label>
        <input
          type="email"
          class="form-control"
          id="inputEmail4"
          placeholder="Email"
          formControlName="email"
        />
        <div
          *ngIf="f['email'].touched && f['email'].invalid"
          class="alert alert-danger mt-2"
        >
          <div *ngIf="f['email'].hasError('required')">Email is required.</div>
          <div *ngIf="f['email'].hasError('email')">
            Enter a valid email address.
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="phoneNumber">Phone Number</label>
        <input
          type="number"
          class="form-control"
          id="phoneNumber"
          placeholder="Phone Number"
          formControlName="phoneNumber"
        />
        <div
          *ngIf="f['phoneNumber'].touched && f['phoneNumber'].invalid"
          class="alert alert-danger mt-2"
        >
          <div *ngIf="f['phoneNumber'].hasError('required')">
            Phone number is required.
          </div>
          <div *ngIf="f['phoneNumber'].hasError('pattern')">
            Enter a valid phone number.
          </div>
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="inputPassword4">Current Password</label>
      <input
        type="password"
        class="form-control"
        id="inputPassword4"
        placeholder="Password"
        formControlName="currentPassword"
      />
      <div
        *ngIf="f['currentPassword'].touched && f['currentPassword'].invalid"
        class="alert alert-danger mt-2"
      >
        <div *ngIf="f['currentPassword'].hasError('minlength')">
          Current password must be at least 6 characters.
        </div>
        <div *ngIf="f['currentPassword'].hasError('pattern')">
          Password must be at least 6 characters long and contain at least one
          letter and one number.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="newPassword">New Password</label>
      <input
        type="password"
        class="form-control"
        id="newPassword"
        placeholder="New Password"
        formControlName="newPassword"
      />
      <div
        *ngIf="f['newPassword'].touched && f['newPassword'].invalid"
        class="alert alert-danger mt-2"
      >
        <div *ngIf="f['newPassword'].hasError('minlength')">
          New password must be at least 6 characters.
        </div>
        <div *ngIf="f['newPassword'].hasError('pattern')">
          Password must be at least 6 characters long and contain at least one
          letter and one number.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="rePassword">Confirm Password</label>
      <input
        type="password"
        class="form-control"
        id="rePassword"
        placeholder="Confirm Password"
        formControlName="confirmPassword"
      />
      <div
        *ngIf="f['confirmPassword'].touched && f['confirmPassword'].invalid"
        class="alert alert-danger mt-2"
      >
        <div *ngIf="f['confirmPassword'].hasError('rePasswordMatch')">
          Passwords must match.
        </div>
      </div>
    </div>

    <div *ngIf="apiError?.length !== 0">
      <div
        *ngFor="let error of apiError.split(', ')"
        class="alert alert-danger mt-2"
      >
        {{ error }}
      </div>
    </div>

    <button type="submit" class="btn" [disabled]="editAccountForm.invalid">
      Save changes
    </button>
  </form>
</section>
